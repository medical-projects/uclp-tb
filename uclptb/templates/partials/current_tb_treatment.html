{% load forms %}
<div class="panel panel-active">
  <div class="panel-heading">
    <h3>
      {% icon "fa-medkit" %} Current Treatment <span ng-show="episode.tb_meta[0].directly_observed_therapy">(DOT)</span>
    </h3>
  </div>
  <table class="table content-offset-20">
    <tr>
      <th>Start</th>
      <th>Drug</th>
      <th></th>
    </tr>
    <tr ng-repeat="item in episode.treatment"
        ng-show="!item.end_date && item.planned_end_date">
      <td>
        <span ng-show="item.start_date">[[item.start_date | shortDate]]</span>
        <span ng-show="item.end_date">-[[item.end_date | shortDate]]</span>
      </td>
      <td>
        [[item.drug]] [[item.dose]] [[item.route]]
      </td>
      <td>
        <span ng-show="item.start_date">day</span>
        [[ item.start_date | daysSince:1:true]]
        <span ng-show="item.start_date">/</span>
        [[ item.start_date | daysTo:item.planned_end_date:true ]]
      </td>
    </tr>
  </table>
  <div class="panel-footer">
    <div class="row content-offset- content-offset-below-">
      <button class="btn btn-primary pull-right" open-pathway="observe_dot">
        <i class="fa fa-eye-slash"></i> Observe
      </button>
      <button class="btn btn-secondary pull-right" open-pathway="dot_history">
        <i class="fa fa-history"></i> History
      </button>
    </div>
  </div>
</div>
